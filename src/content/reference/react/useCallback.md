---
title: useCallback
---

<Intro>

`useCallback` рдПрдХ React рд╣реБрдХ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдлрдВрдХреНрд╢рди рдбреЗрдлрд┐рдирд┐рд╢рди рдХреЛ рдХреИрд╢ рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рджреЗрддрд╛ рд╣реИред

```js
const cachedFn = useCallback(fn, dependencies)
```

</Intro>

<Note>

[React Compiler](/learn/react-compiler) automatically memoizes values and functions, reducing the need for manual `useCallback` calls. You can use the compiler to handle memoization automatically.

</Note>

<InlineToc />

---

## Reference {/*reference*/}

### `useCallback(fn, dependencies)` {/*usecallback*/}

рдЕрдкрдиреЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рдЯреЙрдк рд▓реЗрд╡рд▓ рдкрд░ рдлрдВрдХреНрд╢рди рдбреЗрдлрд┐рдирд┐рд╢рди рдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдХреИрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `useCallback` рдХреЙрд▓ рдХрд░реЗрдВ:

```js {4,9}
import { useCallback } from 'react';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
```

[рдиреАрдЪреЗ рдФрд░ рдЙрджрд╛рд╣рд░рдг рджреЗрдЦреЗрдВред](#usage)

#### Parameters {/*parameters*/}

* `fn`: рд╡рд╣ рдлрдВрдХреНрд╢рди рдЬрд┐рд╕реЗ рдЖрдк рдХреИрд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред рдпрд╣ рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрд░реНрдЧреНрдпреВрдореЗрдВрдЯреНрд╕ рд▓реЗ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХреЛрдИ рднреА рд╡реИрд▓реНрдпреВ рд░рд┐рдЯрд░реНрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред React рдкрд╣рд▓реЗ рд░реЗрдВрдбрд░ рдкрд░ рдЖрдкрдХрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ (рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛!)ред рдЕрдЧрд▓реЗ рд░реЗрдВрдбрд░ рдкрд░, рдЕрдЧрд░ `dependencies` рдирд╣реАрдВ рдмрджрд▓реА рд╣реИрдВ, рддреЛ React рд╡рд╣реА рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ `dependencies` рдмрджрд▓ рдЧрдИ рд╣реИрдВ, рддреЛ React рдЗрд╕ рд░реЗрдВрдбрд░ рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдирдпрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдмрд╛рдж рдореЗрдВ рд░рд┐рдпреВрдЬрд╝ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреЛрд░ рдХрд░рддрд╛ рд╣реИред React рдЖрдкрдХрд╛ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛, рдмрд▓реНрдХрд┐ рдЗрд╕реЗ рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк рддрдп рдХрд░ рд╕рдХреЗрдВ рдХрд┐ рдЗрд╕реЗ рдХрдм рдФрд░ рдХреИрд╕реЗ рдХреЙрд▓ рдХрд░рдирд╛ рд╣реИред

* `dependencies`: рдЙрди рд╕рднреА рд░рд┐рдПрдХреНрдЯрд┐рд╡ рд╡реИрд▓реНрдпреВрдЬрд╝ рдХреА рд╕реВрдЪреА рдЬреЛ `fn` рдХреЗ рдХреЛрдб рдореЗрдВ рд░реЗрдлрд░реЗрдВрд╕ рдХреА рдЧрдИ рд╣реИрдВред рд░рд┐рдПрдХреНрдЯрд┐рд╡ рд╡реИрд▓реНрдпреВрдЬрд╝ рдореЗрдВ рдкреНрд░реЙрдкреНрд╕, рд╕реНрдЯреЗрдЯ, рдФрд░ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдмреЙрдбреА рдореЗрдВ рдбрд╛рдпрд░реЗрдХреНрдЯрд▓реА рдбрд┐рдХреНрд▓реЗрдпрд░ рдХрд┐рдП рдЧрдП рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдФрд░ рдлрдВрдХреНрд╢рдиреНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдпрджрд┐ рдЖрдкрдХрд╛ рд▓рд┐рдВрдЯрд░ [React рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░](/learn/editor-setup#linting) рд╣реИ, рддреЛ рдпрд╣ рд╡реЗрд░рд┐рдлрд╝рд╛рдИ рдХрд░реЗрдЧрд╛ рдХрд┐ рд╣рд░ рд░рд┐рдПрдХреНрдЯрд┐рд╡ рд╡реИрд▓реНрдпреВ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рджреА рдЧрдИ рд╣реИред рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреА рд╕реВрдЪреА рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реНрдерд┐рд░ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕реЗ рдЗрдирд▓рд╛рдЗрди, `[dep1, dep2, dep3]` рдХреА рддрд░рд╣ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред React рдкреНрд░рддреНрдпреЗрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреА рддреБрд▓рдирд╛ рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд░рддрд╛ рд╣реИред

#### Returns {/*returns*/}

рдкрд╣рд▓реЗ рд░реЗрдВрдбрд░ рдкрд░, `useCallback` рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ `fn` рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред

рдЕрдЧрд▓реЗ рд░реЗрдВрдбрд░ рдкрд░, рдпрд╣ рдпрд╛ рддреЛ рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ рдХреИрд╢реНрдб `fn` рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ (рдпрджрд┐ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдирд╣реАрдВ рдмрджрд▓реА рд╣реИрдВ), рдпрд╛ рдЗрд╕ рд░реЗрдВрдбрд░ рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдирдпрд╛ `fn` рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред

#### Caveats {/*caveats*/}

* `useCallback` рдПрдХ рд╣реБрдХ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдХреЗрд╡рд▓ рдЖрдкрдХреЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдпрд╛ рдХрд╕реНрдЯрдо рд╣реБрдХ рдХреЗ **рдЯреЙрдк рд▓реЗрд╡рд▓** рдкрд░ рд╣реА рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕реЗ рд▓реВрдкреНрд╕ рдпрд╛ рдХрдВрдбреАрд╢рдиреНрд╕ рдХреЗ рдЕрдВрджрд░ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ рдЬрд╝рд░реВрд░реА рд╣реЛ, рддреЛ рдирдпрд╛ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдмрдирд╛рдПрдБ рдФрд░ рд╕реНрдЯреЗрдЯ рдХреЛ рд╡рд╣рд╛рдБ рд▓реЗ рдЬрд╛рдПрдБред
* React рдХреИрд╢реНрдб рдлрдВрдХреНрд╢рди рдХреЛ рддрдм рддрдХ рдбрд┐рд╕реНрдХрд╛рд░реНрдб **рдирд╣реАрдВ рдХрд░рддрд╛ рдЬрдм рддрдХ рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░рдг рди рд╣реЛ**ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдореЛрдб рдореЗрдВ, рдпрджрд┐ рдЖрдк рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреА рдлрд╝рд╛рдЗрд▓ рдПрдбрд┐рдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ React рдХреИрд╢ рдбрд┐рд╕реНрдХрд╛рд░реНрдб рдХрд░ рджреЗрддрд╛ рд╣реИред рдбреЗрд╡рд▓рдкрдореЗрдВрдЯ рдФрд░ рдкреНрд░реЛрдбрдХреНрд╢рди рджреЛрдиреЛрдВ рдореЗрдВ, рдпрджрд┐ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдЗрдирд┐рд╢рд┐рдпрд▓ рдорд╛рдЙрдВрдЯ рдХреЗ рджреМрд░рд╛рди рд╕рд╕реНрдкреЗрдВрдб рд╣реЛрддрд╛ рд╣реИ, рддреЛ React рдХреИрд╢ рдбрд┐рд╕реНрдХрд╛рд░реНрдб рдХрд░ рджреЗрддрд╛ рд╣реИред рднрд╡рд┐рд╖реНрдп рдореЗрдВ, React рдФрд░ рдлрд╝реАрдЪрд░реНрд╕ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдХреИрд╢ рдбрд┐рд╕реНрдХрд╛рд░реНрдб рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдПрдБтАФрдЬреИрд╕реЗ рдХрд┐ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реНрдб рд▓рд┐рд╕реНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдЯ-рдЗрди рд╕рдкреЛрд░реНрдЯ, рдЬреЛ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реНрдб рдЯреЗрдмрд▓ рд╡реНрдпреВрдкреЛрд░реНрдЯ рд╕реЗ рдмрд╛рд╣рд░ рд╕реНрдХреНрд░реЙрд▓ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЖрдЗрдЯрдореНрд╕ рдХреЗ рд▓рд┐рдП рдХреИрд╢ рдбрд┐рд╕реНрдХрд╛рд░реНрдб рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рдЖрдк `useCallback` рдХреЛ рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЖрдкрдХреЗ рдЕрдкреЗрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЕрдиреНрдпрдерд╛, [рд╕реНрдЯреЗрдЯ рд╡реЗрд░рд┐рдПрдмрд▓](/reference/react/useState#im-trying-to-set-state-to-a-function-but-it-gets-called-instead) рдпрд╛ [рд░реЗрдлрд╝](/reference/react/useRef#avoiding-recreating-the-ref-contents) рдмреЗрд╣рддрд░ рд╡рд┐рдХрд▓реНрдк рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

---

## Usage {/*usage*/}

### рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреА рд░реА-рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЛ рд╕реНрдХрд┐рдк рдХрд░рдирд╛ {/*skipping-re-rendering-of-components*/}

рдЬрдм рдЖрдк рд░реЗрдВрдбрд░ рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдХреЛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЪрд╛рдЗрд▓реНрдб рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд┐рдП рдЧрдП рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рдХреИрд╢ рдХрд░рдирд╛ рдХрднреА-рдХрднреА рдЬрд╝рд░реВрд░реА рд╣реЛрддрд╛ рд╣реИред рдкрд╣рд▓реЗ рдЗрд╕рдХрд╛ рд╕рд┐рдВрдЯреИрдХреНрд╕ рджреЗрдЦреЗрдВ, рдлрд┐рд░ рд╕рдордЭреЗрдВ рдХрд┐ рдпрд╣ рдХрдм рдЙрдкрдпреЛрдЧреА рд╣реИред

рдЕрдкрдиреЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдлрдВрдХреНрд╢рди рдХреЛ рдХреИрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрд╕рдХреА рдбреЗрдлрд┐рдирд┐рд╢рди рдХреЛ `useCallback` рд╣реБрдХ рдореЗрдВ рд░реИрдк рдХрд░реЗрдВ:

```js [[3, 4, "handleSubmit"], [2, 9, "[productId, referrer]"]]
import { useCallback } from 'react';

function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);
  // ...
```

`useCallback` рдХреЛ рджреЛ рдЪреАрдЬрд╝реЗрдВ рдкрд╛рд╕ рдХрд░рдиреА рд╣реЛрдВрдЧреА:

1. рдлрдВрдХреНрд╢рди рдбреЗрдлрд┐рдирд┐рд╢рди, рдЬрд┐рд╕реЗ рдЖрдк рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдХреИрд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред
2. <CodeStep step={2}>рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреА рд╕реВрдЪреА</CodeStep>, рдЬрд┐рд╕рдореЗрдВ рдЖрдкрдХреЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рд╡реЗ рд╕рднреА рд╡реИрд▓реНрдпреВрдЬрд╝ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдЬреЛ рдЗрд╕ рдлрдВрдХреНрд╢рди рдореЗрдВ рдЙрдкрдпреЛрдЧ рд╣реБрдП рд╣реИрдВред

рдкрд╣рд▓реЗ рд░реЗрдВрдбрд░ рдореЗрдВ, `useCallback` рд╕реЗ <CodeStep step={3}>рд░рд┐рдЯрд░реНрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдлрдВрдХреНрд╢рди</CodeStep> рд╡рд╣реА рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдиреЗ рдкрд╛рд╕ рдХрд┐рдпрд╛ рд╣реИред

рдЕрдЧрд▓реЗ рд░реЗрдВрдбрд░ рдореЗрдВ, React рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдЗрд╕ рд░реЗрдВрдбрд░ рдореЗрдВ рдкрд╛рд╕ рдХреА рдЧрдИ <CodeStep step={2}>рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝</CodeStep> рдХреА рддреБрд▓рдирд╛ рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдирд╣реАрдВ рдмрджрд▓реА рд╣реИрдВ (рддреБрд▓рдирд╛ [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) рд╕реЗ рд╣реЛрддреА рд╣реИ), рддреЛ `useCallback` рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рдХрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред рдпрджрд┐ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдмрджрд▓ рдЧрдИ рд╣реИрдВ, рддреЛ React рдЗрд╕ рд░реЗрдВрдбрд░ рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдирдпрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред

рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, `useCallback` рдлрдВрдХреНрд╢рди рдХреЛ рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рди рдмрджрд▓реЗрдВред

**рдЙрджрд╛рд╣рд░рдг рд╕реЗ рд╕рдордЭреЗрдВ рдХрд┐ рдпрд╣ рдХрдм рдЙрдкрдпреЛрдЧреА рд╣реИред**

рдорд╛рди рд▓реЗрдВ рдЖрдк `ProductPage` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд╕реЗ `handleSubmit` рдлрдВрдХреНрд╢рди рдХреЛ `ShippingForm` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдореЗрдВ рдкрд╛рд╕ рдХрд░ рд░рд╣реЗ рд╣реИрдВ:

```js {5}
function ProductPage({ productId, referrer, theme }) {
  // ...
  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
```

рдЖрдкрдиреЗ рдиреЛрдЯрд┐рд╕ рдХрд┐рдпрд╛ рдХрд┐ `theme` рдкреНрд░реЙрдк рдХреЛ рдЯреЙрдЧрд▓ рдХрд░рдиреЗ рдкрд░ рдРрдк рдХреБрдЫ рджреЗрд░ рдХреЗ рд▓рд┐рдП рдлрд╝реНрд░реАрдЬрд╝ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк `<ShippingForm />` рдХреЛ JSX рд╕реЗ рд╣рдЯрд╛ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдРрдк рддреЗрдЬрд╝ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ `ShippingForm` рдХреЛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдирд╛ рдлрд╝рд╛рдпрджреЗрдордВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

**рдбрд┐рдлреЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЬрдм рдХреЛрдИ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрддрд╛ рд╣реИ, рддреЛ React рдЙрд╕рдХреЗ рд╕рднреА рдЪрд╛рдЗрд▓реНрдб рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯреНрд╕ рдХреЛ рд░рд┐рдХрд░реНрд╕рд┐рд╡рд▓реА рд░реА-рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИред** рдЗрд╕рд▓рд┐рдП рдЬрдм `ProductPage` рдЕрд▓рдЧ `theme` рдХреЗ рд╕рд╛рде рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрддрд╛ рд╣реИ, рддреЛ `ShippingForm` рднреА рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрддрд╛ рд╣реИред рдпрджрд┐ рдЪрд╛рдЗрд▓реНрдб рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд╣рд▓реНрдХрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИред рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдкрдиреЗ рдЪреЗрдХ рдХрд┐рдпрд╛ рдФрд░ рдкрд╛рдпрд╛ рдХрд┐ рд░реА-рд░реЗрдВрдбрд░ рдзреАрдорд╛ рд╣реИ, рддреЛ рдЖрдк `ShippingForm` рдХреЛ [`memo`](/reference/react/memo) рд╕реЗ рд░реИрдк рдХрд░рдХреЗ рдмрддрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрджрд┐ рдЙрд╕рдХреЗ рдкреНрд░реЙрдкреНрд╕ рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рдЬреИрд╕реЗ рд╣реА рд╣реИрдВ, рддреЛ рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░реЗрдВ:

```js {3,5}
import { memo } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  // ...
});
```

**рдЗрд╕ рдмрджрд▓рд╛рд╡ рдХреЗ рдмрд╛рдж, `ShippingForm` рддрднреА рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрдЧрд╛ рдЬрдм рдЙрд╕рдХреЗ рдкреНрд░реЙрдкреНрд╕ рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ рдЕрд▓рдЧ рд╣реЛрдВрдЧреЗред** рдпрд╣рд╛рдБ рдлрдВрдХреНрд╢рди рдХреЛ рдХреИрд╢ рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ! рдорд╛рди рд▓реАрдЬрд┐рдП рдЖрдкрдиреЗ `handleSubmit` рдХреЛ `useCallback` рдХреЗ рдмрд┐рдирд╛ рдбрд┐рдХреНрд▓реЗрдпрд░ рдХрд┐рдпрд╛ рд╣реИ:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // рд╣рд░ рдмрд╛рд░ theme рдмрджрд▓реЗрдЧрд╛, рдпрд╣ рдПрдХ рдирдпрд╛ рдлрдВрдХреНрд╢рди рд╣реЛрдЧрд╛...
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }
  
  return (
    <div className={theme}>
      {/* ...рдЗрд╕рд▓рд┐рдП ShippingForm рдХреЗ рдкреНрд░реЙрдкреНрд╕ рд╣рдореЗрд╢рд╛ рдмрджрд▓реЗрдВрдЧреЗ рдФрд░ рдпрд╣ рд╣рд░ рдмрд╛рд░ рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрдЧрд╛ */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ, `function () {}` рдпрд╛ `() => {}` рд╣рд░ рдмрд╛рд░ рдПрдХ *рдирдпрд╛* рдлрдВрдХреНрд╢рди рдмрдирд╛рддрд╛ рд╣реИ**, рдЬреИрд╕реЗ `{}` рд╣рд░ рдмрд╛рд░ рдирдпрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддрд╛ рд╣реИред рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ `ShippingForm` рдХреЗ рдкреНрд░реЙрдкреНрд╕ рдХрднреА рд╕рдорд╛рди рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ, рдФрд░ рдЖрдкрдХреА [`memo`](/reference/react/memo) рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧреАред рдпрд╣реА рд╡рд╣ рд╕реНрдерд┐рддрд┐ рд╣реИ рдЬрд╣рд╛рдБ `useCallback` рдЙрдкрдпреЛрдЧреА рд╣реИ:

```js {2,3,8,12-13}
function ProductPage({ productId, referrer, theme }) {
  // React рдХреЛ рдмрддрд╛рдПрдБ рдХрд┐ рдлрдВрдХреНрд╢рди рдХреЛ рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рдХреИрд╢ рдХрд░рдирд╛ рд╣реИ...
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // ...рддрд╛рдХрд┐ рдЬрдм рддрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рди рдмрджрд▓реЗрдВ...

  return (
    <div className={theme}>
      {/* ...ShippingForm рдХреЛ рд╕рдорд╛рди рдкреНрд░реЙрдкреНрд╕ рдорд┐рд▓реЗрдВ рдФрд░ рдпрд╣ рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░ рд╕рдХреЗ */}
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}
```

**`handleSubmit` рдХреЛ `useCallback` рдореЗрдВ рд░реИрдк рдХрд░рдиреЗ рд╕реЗ рдЖрдк рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ рд╡рд╣реА рдлрдВрдХреНрд╢рди рд░рд╣реЗ** (рдЬрдм рддрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рди рдмрджрд▓реЗрдВ)ред рдЖрдкрдХреЛ рдлрдВрдХреНрд╢рди рдХреЛ `useCallback` рд╕реЗ рд░реИрдк рдХрд░рдирд╛ рдЬрд╝рд░реВрд░реА рдирд╣реАрдВ рд╣реИ рдЬрдм рддрдХ рдЗрд╕рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░рдг рди рд╣реЛред рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдХрд╛рд░рдг рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ [`memo`](/reference/react/memo) рд╕реЗ рд░реИрдк рдХрд┐рдП рдЧрдП рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддрд╛рдХрд┐ рд╡рд╣ рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░ рд╕рдХреЗред рдЕрдиреНрдп рдХрд╛рд░рдг рдЗрд╕ рдкреЗрдЬ рдкрд░ рдЖрдЧреЗ рдмрддрд╛рдП рдЧрдП рд╣реИрдВред

<Note>

**`useCallback` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рд▓рд┐рдП рдХрд░реЗрдВред** рдпрджрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛, рддреЛ рдкрд╣рд▓реЗ рдореВрд▓ рд╕рдорд╕реНрдпрд╛ рдвреВрдВрдвреЗрдВ рдФрд░ рдареАрдХ рдХрд░реЗрдВред рдлрд┐рд░ `useCallback` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

</Note>

<DeepDive>

#### `useCallback` рдХрд╛ `useMemo` рд╕реЗ рдХреНрдпрд╛ рд╕рдВрдмрдВрдз рд╣реИ? {/*how-is-usecallback-related-to-usememo*/}

`useCallback` рдЕрдХреНрд╕рд░ [`useMemo`](/reference/react/useMemo) рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИред рджреЛрдиреЛрдВ рдЪрд╛рдЗрд▓реНрдб рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреА рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реИрдВред рдпреЗ рдЖрдкрдХреЛ рдиреАрдЪреЗ рдкрд╛рд╕ рдХреА рдЧрдИ рд╡реИрд▓реНрдпреВрдЬрд╝ рдХреЛ [рдореЗрдореЛрдЗрдЬрд╝](https://en.wikipedia.org/wiki/Memoization) (рдХреИрд╢) рдХрд░рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рджреЗрддреЗ рд╣реИрдВ:

```js {6-8,10-15,19}
import { useMemo, useCallback } from 'react';

function ProductPage({ productId, referrer }) {
  const product = useData('/product/' + productId);

  const requirements = useMemo(() => { // рдЖрдкрдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрд╕рдХреЗ рд░рд┐рдЬрд▓реНрдЯ рдХреЛ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ
    return computeRequirements(product);
  }, [product]);

  const handleSubmit = useCallback((orderDetails) => { // рдлрдВрдХреНрд╢рди рдХреЛ рдЦреБрдж рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm requirements={requirements} onSubmit={handleSubmit} />
    </div>
  );
}
```

рджреЛрдиреЛрдВ рдореЗрдВ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдпреЗ рдХреНрдпрд╛ рдХреИрд╢ рдХрд░рддреЗ рд╣реИрдВ:

* **[`useMemo`](/reference/react/useMemo) рдЖрдкрдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдорд┐рд▓реЗ *рд░рд┐рдЬрд▓реНрдЯ* рдХреЛ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИред** рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдпрд╣ `computeRequirements(product)` рдХреЗ рд░рд┐рдЬрд▓реНрдЯ рдХреЛ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ, рддрд╛рдХрд┐ рдпрд╣ рддрдм рддрдХ рди рдмрджрд▓реЗ рдЬрдм рддрдХ `product` рди рдмрджрд▓реЗред рдЗрд╕рд╕реЗ рдЖрдк рдмрд┐рдирд╛ рдЬрд╝рд░реВрд░рдд рдХреЗ `ShippingForm` рдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХрд┐рдП `requirements` рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдиреАрдЪреЗ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЬрд╝рд░реВрд░рдд рдкрдбрд╝рдиреЗ рдкрд░, React рдЖрдкрдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рд░реЗрдВрдбрд░ рдХреЗ рджреМрд░рд╛рди рдХреЙрд▓ рдХрд░рдХреЗ рд░рд┐рдЬрд▓реНрдЯ рдХреЛ рдлрд┐рд░ рд╕реЗ рдХреИрд▓рдХреБрд▓реЗрдЯ рдХрд░рддрд╛ рд╣реИред

* **`useCallback` рдлрдВрдХреНрд╢рди рдХреЛ *рдЦреБрдж* рдХреИрд╢ рдХрд░рддрд╛ рд╣реИред** рдпрд╣ `useMemo` рдХреА рддрд░рд╣ рдЖрдкрдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ред рдмрд▓реНрдХрд┐, рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рджрд┐рдП рдЧрдП рдлрдВрдХреНрд╢рди (`handleSubmit`) рдХреЛ рдХреИрд╢ рдХрд░рддрд╛ рд╣реИ, рддрд╛рдХрд┐ рдпрд╣ рддрдм рддрдХ рди рдмрджрд▓реЗ рдЬрдм рддрдХ `productId` рдпрд╛ `referrer` рди рдмрджрд▓реЗрдВред рдЗрд╕рд╕реЗ рдЖрдк рдмрд┐рдирд╛ рдЬрд╝рд░реВрд░рдд рдХреЗ `ShippingForm` рдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХрд┐рдП `handleSubmit` рдХреЛ рдиреАрдЪреЗ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдХреЛрдб рддрдм рддрдХ рдирд╣реАрдВ рдЪрд▓реЗрдЧрд╛ рдЬрдм рддрдХ рдпреВрдЬрд╝рд░ рдлрд╝реЙрд░реНрдо рд╕рдмрдорд┐рдЯ рди рдХрд░реЗред

рдпрджрд┐ рдЖрдк [`useMemo`](/reference/react/useMemo) рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ, рддреЛ `useCallback` рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ:

```js
// рдЖрд╕рд╛рди рдЗрдореНрдкреНрд▓рд┐рдореЗрдВрдЯреЗрд╢рди (React рдореЗрдВ рдХреБрдЫ рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ)
function useCallback(fn, dependencies) {
  return useMemo(() => fn, dependencies);
}
```

[`useMemo` рдФрд░ `useCallback` рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдкрдврд╝реЗрдВред](/reference/react/useMemo#memoizing-a-function)

</DeepDive>

<DeepDive>

#### рдХреНрдпрд╛ рд╣рд░ рдЬрдЧрд╣ `useCallback` рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рд┐рдП? {/*should-you-add-usecallback-everywhere*/}

рдпрджрд┐ рдЖрдкрдХрд╛ рдРрдк рдЗрд╕ рд╕рд╛рдЗрдЯ рдЬреИрд╕рд╛ рд╣реИ, рдФрд░ рдЬрд╝реНрдпрд╛рджрд╛рддрд░ рдЗрдВрдЯрд░реИрдХреНрд╢рдиреНрд╕ рдореЛрдЯреЗ рд╕реНрддрд░ рдХреЗ рд╣реИрдВ (рдЬреИрд╕реЗ рдкреВрд░реЗ рдкреЗрдЬ рдпрд╛ рд╕реЗрдХреНрд╢рди рдХреЛ рд░рд┐рдкреНрд▓реЗрд╕ рдХрд░рдирд╛), рддреЛ рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реЛрддреАред рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдкрдХрд╛ рдРрдк рдбреНрд░реЙрдЗрдВрдЧ рдПрдбрд┐рдЯрд░ рдЬреИрд╕рд╛ рд╣реИ рдФрд░ рдЗрдВрдЯрд░реИрдХреНрд╢рдиреНрд╕ рдЫреЛрдЯреЗ рд╕реНрддрд░ рдХреЗ рд╣реИрдВ (рдЬреИрд╕реЗ рд╢реЗрдкреНрд╕ рдХреЛ рдореВрд╡ рдХрд░рдирд╛), рддреЛ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдмрд╣реБрдд рдорджрджрдЧрд╛рд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

`useCallback` рд╕реЗ рдлрдВрдХреНрд╢рди рдХреЛ рдХреИрд╢ рдХрд░рдирд╛ рдХреЗрд╡рд▓ рдХреБрдЫ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ:

* рдЬрдм рдЖрдк рдЗрд╕реЗ рдХрд┐рд╕реА [`memo`](/reference/react/memo) рдореЗрдВ рд░реИрдк рдХрд┐рдП рдЧрдП рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ рдкреНрд░реЙрдк рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╡реИрд▓реНрдпреВ рди рдмрджрд▓рдиреЗ рдкрд░ рд░реА-рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реНрдХрд┐рдк рд╣реЛ рдЬрд╛рдПред рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рд╕реЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рддрднреА рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрдЧрд╛ рдЬрдм рдЙрд╕рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдмрджрд▓реЗрдВрдЧреАред
* рдЬрдм рдЖрдкрдХрд╛ рдкрд╛рд╕ рдХрд┐рдпрд╛ рд╣реБрдЖ рдлрдВрдХреНрд╢рди рдХрд┐рд╕реА рд╣реБрдХ рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд┐рд╕реА рджреВрд╕рд░реЗ `useCallback` рдореЗрдВ рд░реИрдк рдХрд┐рдП рдЧрдП рдлрдВрдХреНрд╢рди рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ, рдпрд╛ [`useEffect`](/reference/react/useEffect) рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВред

рдЕрдиреНрдп рдорд╛рдорд▓реЛрдВ рдореЗрдВ `useCallback` рд╕реЗ рдлрдВрдХреНрд╢рди рдХреЛ рд░реИрдк рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рд╢реЗрд╖ рдлрд╝рд╛рдпрджрд╛ рдирд╣реАрдВ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐ рдРрд╕рд╛ рдХрд░рдиреЗ рд╕реЗ рдмрдбрд╝рд╛ рдиреБрдХрд╕рд╛рди рднреА рдирд╣реАрдВ рд╣реЛрддрд╛, рд▓реЗрдХрд┐рди рдХреЛрдб рдХрдо рд░реАрдбреЗрдмрд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рд╕рд╛рде рд╣реА, рд╣рд░ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдкреНрд░рднрд╛рд╡реА рдирд╣реАрдВ рд╣реЛрддрд╛: рдПрдХ рднреА "рд╣рд░ рдмрд╛рд░ рдирдИ" рд╡реИрд▓реНрдпреВ рдкреВрд░реЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреЛ рдмреЗрдХрд╛рд░ рдХрд░ рд╕рдХрддреА рд╣реИред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ `useCallback` рдлрдВрдХреНрд╢рди рдХреЛ *рдмрдирдиреЗ* рд╕реЗ рдирд╣реАрдВ рд░реЛрдХрддрд╛ред рдЖрдк рд╣рдореЗрд╢рд╛ рдирдпрд╛ рдлрдВрдХреНрд╢рди рдмрдирд╛ рд░рд╣реЗ рд╣реЛрддреЗ рд╣реИрдВ (рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ!), рд▓реЗрдХрд┐рди React рдЗрд╕реЗ рдЗрдЧреНрдиреЛрд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдХреБрдЫ рдирд╣реАрдВ рдмрджрд▓рд╛ рддреЛ рдХреИрд╢реНрдб рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИред

**рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдлреЙрд▓реЛ рдХрд░рдХреЗ рдЖрдк рдХрд╛рдлреА рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреЛ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ:**

1. рдЬрдм рдХреЛрдИ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдЕрдиреНрдп рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯреНрд╕ рдХреЛ рд╡рд┐рдЬрд╝реБрдЕрд▓реА рд░реИрдк рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ [JSX рдХреЛ рдЪрд┐рд▓реНрдбреНрд░рди рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░](/learn/passing-props-to-a-component#passing-jsx-as-children) рдХрд░рдиреЗ рджреЗрдВред рдЗрд╕рд╕реЗ рдпрджрд┐ рд░реИрдкрд░ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдЕрдкрдиреЗ рд╕реНрдЯреЗрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ, рддреЛ React рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЙрд╕рдХреЗ рдЪрд┐рд▓реНрдбреНрд░рди рдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред

2. рд▓реЛрдХрд▓ рд╕реНрдЯреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЬрд╝рд░реВрд░рдд рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ [рд╕реНрдЯреЗрдЯ рдХреЛ рдКрдкрд░ рди рд▓реЗ рдЬрд╛рдПрдБ](/learn/sharing-state-between-components)ред рдлрд╝реЙрд░реНрдо рдЬреИрд╕реЗ рдЯреНрд░рд╛рдВрдЬрд╝рд┐рдПрдВрдЯ рд╕реНрдЯреЗрдЯ рдпрд╛ рдЖрдЗрдЯрдо рд╣реЛрд╡рд░ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдЬреИрд╕реЗ рд╕реНрдЯреЗрдЯреНрд╕ рдХреЛ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдЯреНрд░реА рдХреЗ рд╕рдмрд╕реЗ рдКрдкрд░ рдпрд╛ рдЧреНрд▓реЛрдмрд▓ рд╕реНрдЯреЗрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдореЗрдВ рди рд░рдЦреЗрдВред

3. рдЕрдкрдиреЗ [рд░реЗрдВрдбрд░рд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ рдХреЛ рдкреНрдпреЛрд░ рд░рдЦреЗрдВ](/learn/keeping-components-pure)ред рдпрджрд┐ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрдиреЗ рдкрд░ рд╕рдорд╕реНрдпрд╛ рд╣реЛрддреА рд╣реИ рдпрд╛ рд╡рд┐рдЬрд╝реБрдЕрд▓ рдЧреНрд▓рд┐рдЪ рджрд┐рдЦрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХрд╛ рдмрдЧ рд╣реИред рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдмрдЧ рдХреЛ рдареАрдХ рдХрд░реЗрдВред

4. [рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╕реНрдЯреЗрдЯ рдЕрдкрдбреЗрдЯреНрд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЗрдлрд╝реЗрдХреНрдЯреНрд╕](/learn/you-might-not-need-an-effect) рд╕реЗ рдмрдЪреЗрдВред React рдРрдкреНрд╕ рдХреА рдЕрдзрд┐рдХрддрд░ рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рд╕рдорд╕реНрдпрд╛рдПрдБ рдРрд╕реЗ рдЗрдлрд╝реЗрдХреНрдЯреНрд╕ рд╕реЗ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рдЕрдкрдбреЗрдЯ рдХреА рдЪреЗрди рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдмрд╛рд░-рдмрд╛рд░ рд░реЗрдВрдбрд░ рд╣реЛрддреЗ рд╣реИрдВред

5. рдЗрдлрд╝реЗрдХреНрдЯреНрд╕ рдореЗрдВ рд╕реЗ [рдЕрдирд╛рд╡рд╢реНрдпрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рд╣рдЯрд╛рдПрдБ](/learn/removing-effect-dependencies)ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреА рдмрдЬрд╛рдп рдСрдмреНрдЬреЗрдХреНрдЯ рдпрд╛ рдлрдВрдХреНрд╢рди рдХреЛ рдЗрдлрд╝реЗрдХреНрдЯ рдХреЗ рдЕрдВрджрд░ рдпрд╛ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рдмрд╛рд╣рд░ рд░рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИред

рдпрджрд┐ рдЗрд╕рдХреЗ рдмрд╛рдж рднреА рдХреЛрдИ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдзреАрдорд╛ рд▓рдЧрддрд╛ рд╣реИ, рддреЛ [React Developer Tools рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓рд░](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдкрддрд╛ рд▓рдЧреЗ рдХрд┐ рдХреМрди-рд╕реЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯреНрд╕ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рд╕реЗ рд╕рдмрд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рд▓рд╛рдн рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЬрд╝рд░реВрд░рдд рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдЬреЛрдбрд╝реЗрдВред рдЗрди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдЕрдкрдирд╛рдиреЗ рд╕реЗ рдЖрдкрдХреЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯреНрд╕ рдХреЛ рдбрд┐рдмрдЧ рдХрд░рдирд╛ рдФрд░ рд╕рдордЭрдирд╛ рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред рд▓рдВрдмреЗ рд╕рдордп рдХреЗ рд▓рд┐рдП, рд╣рдо [рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреЛ рдСрдЯреЛрдореИрдЯрд┐рдХрд▓реА рдХрд░рдиреЗ рдкрд░ рд░рд┐рд╕рд░реНрдЪ](https://www.youtube.com/watch?v=lGEMwh32soc) рдХрд░ рд░рд╣реЗ рд╣реИрдВред

</DeepDive>

<Recipes titleText="useCallback рдФрд░ рдлрдВрдХреНрд╢рди рдХреЛ рдбрд╛рдпрд░реЗрдХреНрдЯрд▓реА рдбрд┐рдХреНрд▓реЗрдпрд░ рдХрд░рдиреЗ рдореЗрдВ рдЕрдВрддрд░" titleId="examples-rerendering">

#### `useCallback` рдФрд░ `memo` рдХреЗ рд╕рд╛рде рд░реА-рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реНрдХрд┐рдк рдХрд░рдирд╛ {/*skipping-re-rendering-with-usecallback-and-memo*/}

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, `ShippingForm` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ **рдЬрд╛рдирдмреВрдЭрдХрд░ рдзреАрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ** рддрд╛рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХреЗрдВ рдХрд┐ рдЬрдм рдХреЛрдИ React рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдзреАрдорд╛ рд╣реЛ, рддрдм рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред рдХрд╛рдЙрдВрдЯрд░ рдмрдврд╝рд╛рдиреЗ рдФрд░ рдереАрдо рдХреЛ рдЯреЙрдЧрд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред

рдХрд╛рдЙрдВрдЯрд░ рдмрдврд╝рд╛рдирд╛ рдзреАрдорд╛ рд▓рдЧрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЬрд╛рдирдмреВрдЭрдХрд░ рдзреАрдореЗ рдХрд┐рдП рдЧрдП `ShippingForm` рдХреЛ рд░реА-рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдкрд░ рдордЬрдмреВрд░ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдХрд╛рдЙрдВрдЯрд░ рдмрджрд▓рд╛ рд╣реИ, рдФрд░ рдЖрдкрдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдпреВрдЬрд╝рд░ рдХреА рдирдИ рдкрд╕рдВрдж рджрд┐рдЦрд╛рдиреА рд╣реЛрдЧреАред

рдЕрдм рдереАрдо рдХреЛ рдЯреЙрдЧрд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред **`useCallback` рдФрд░ [`memo`](/reference/react/memo) рдХреА рдорджрдж рд╕реЗ, рдпрд╣ рддреЗрдЬрд╝реА рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рднрд▓реЗ рд╣реА `ShippingForm` рдзреАрдорд╛ рд╣реЛ!** `ShippingForm` рдиреЗ рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░ рджрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ `handleSubmit` рдлрдВрдХреНрд╢рди рдореЗрдВ рдХреЛрдИ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рд╣реБрдЖред `handleSubmit` рдлрдВрдХреНрд╢рди рдирд╣реАрдВ рдмрджрд▓рд╛ рдХреНрдпреЛрдВрдХрд┐ `productId` рдФрд░ `referrer` (рдЖрдкрдХреЗ `useCallback` рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝) рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ рдЕрдм рддрдХ рдирд╣реАрдВ рдмрджрд▓реА рд╣реИрдВред


<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        рдбрд╛рд░реНрдХ рдореЛрдб
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import { useCallback } from 'react';
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]);

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
 // рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рдХреЛрдИ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрддрд╛ рд╣реИ...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[рдХреГрддреНрд░рд┐рдо рд░реВрдк рд╕реЗ рдзреАрдорд╛] <ShippingForm /> рд░реЗрдВрдбрд░ рд╣реЛ рд░рд╣рд╛ рд╣реИ');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // 500 ms рддрдХ рдХреБрдЫ рди рдХрд░реЗрдВ рддрд╛рдХрд┐ рдмреЗрд╣рдж рдзреАрдореЗ рдХреЛрдб рдХрд╛ рдЕрдиреБрдХрд░рдг рд╣реЛ
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>рдиреЛрдЯ: <code>ShippingForm</code> рдХреЛ рдЬрд╛рдирдмреВрдЭрдХрд░ рдзреАрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ!</b></p>
      <label>
        рдЖрдЗрдЯрдореНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛:
        <button type="button" onClick={() => setCount(count - 1)}>тАУ</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        рд╕рдбрд╝рдХ:
        <input name="street" />
      </label>
      <label>
        рд╢рд╣рд░:
        <input name="city" />
      </label>
      <label>
        рдкрд┐рди рдХреЛрдб:
        <input name="zipCode" />
      </label>
      <button type="submit">рд╕рдмрдорд┐рдЯ</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

<Solution />

#### рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ рд╣рдореЗрд╢рд╛ рд░реА-рд░реЗрдВрдбрд░ рдХрд░рдирд╛ {/*always-re-rendering-a-component*/}

рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, `ShippingForm` рдХреА рдЗрдореНрдкреНрд▓рд┐рдореЗрдВрдЯреЗрд╢рди рдХреЛ **рдЬрд╛рдирдмреВрдЭрдХрд░ рдзреАрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ**, рддрд╛рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХреЗрдВ рдХрд┐ рдЬрдм рдХреЛрдИ React рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдзреАрдорд╛ рд╣реЛ, рддрдм рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред рдХрд╛рдЙрдВрдЯрд░ рдмрдврд╝рд╛рдиреЗ рдФрд░ рдереАрдо рдХреЛ рдЯреЙрдЧрд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред

рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЕрдм рдереАрдо рдХреЛ рдЯреЙрдЧрд▓ рдХрд░рдирд╛ рднреА рдзреАрдорд╛ рд╣реИ! рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рдпрд╣ рд╣реИ рдХрд┐ **рдЗрд╕ рд╡рд░реНрдЬрд╝рди рдореЗрдВ `useCallback` рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ,** рдЗрд╕рд▓рд┐рдП `handleSubmit` рд╣рд░ рдмрд╛рд░ рдирдпрд╛ рдлрдВрдХреНрд╢рди рдмрдирддрд╛ рд╣реИ, рдФрд░ рдзреАрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ `ShippingForm` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рд░реА-рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реНрдХрд┐рдк рдирд╣реАрдВ рдХрд░ рдкрд╛рддрд╛ред

<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        рдбрд╛рд░реНрдХ рдореЛрдб
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рдХреЛрдИ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрддрд╛ рд╣реИ...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('[рдХреГрддреНрд░рд┐рдо рд░реВрдк рд╕реЗ рдзреАрдорд╛] <ShippingForm /> рд░реЗрдВрдбрд░ рд╣реЛ рд░рд╣рд╛ рд╣реИ');
  let startTime = performance.now();
  while (performance.now() - startTime < 500) {
    // 500 ms рддрдХ рдХреБрдЫ рди рдХрд░реЗрдВ рддрд╛рдХрд┐ рдмреЗрд╣рдж рдзреАрдореЗ рдХреЛрдб рдХрд╛ рдЕрдиреБрдХрд░рдг рд╣реЛ
  }

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <p><b>рдиреЛрдЯ: <code>ShippingForm</code> рдХреЛ рдЬрд╛рдирдмреВрдЭрдХрд░ рдзреАрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ!</b></p>
      <label>
        рдЖрдЗрдЯрдореНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛:
        <button type="button" onClick={() => setCount(count - 1)}>тАУ</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        рд╕рдбрд╝рдХ:
        <input name="street" />
      </label>
      <label>
        рд╢рд╣рд░:
        <input name="city" />
      </label>
      <label>
        рдкрд┐рди рдХреЛрдб:
        <input name="zipCode" />
      </label>
      <button type="submit">рд╕рдмрдорд┐рдЯ</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>

рд▓реЗрдХрд┐рди рдпрд╣рд╛рдБ рд╡рд╣реА рдХреЛрдб рд╣реИ **рдЬрд┐рд╕рдореЗрдВ рдЬрд╛рдирдмреВрдЭрдХрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдзреАрдорд╛рдкрди рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред** рдХреНрдпрд╛ рдЕрдм `useCallback` рдХрд╛ рди рд╣реЛрдирд╛ рдЖрдкрдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдорд╣рд╕реВрд╕ рд╣реЛрддрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ?


<Sandpack>

```js src/App.js
import { useState } from 'react';
import ProductPage from './ProductPage.js';

export default function App() {
  const [isDark, setIsDark] = useState(false);
  return (
    <>
      <label>
        <input
          type=" FacetGrid
          checked={isDark}
          onChange={e => setIsDark(e.target.checked)}
        />
        рдбрд╛рд░реНрдХ рдореЛрдб
      </label>
      <hr />
      <ProductPage
        referrerId="wizard_of_oz"
        productId={123}
        theme={isDark ? 'dark' : 'light'}
      />
    </>
  );
}
```

```js src/ProductPage.js active
import ShippingForm from './ShippingForm.js';

export default function ProductPage({ productId, referrer, theme }) {
  function handleSubmit(orderDetails) {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }

  return (
    <div className={theme}>
      <ShippingForm onSubmit={handleSubmit} />
    </div>
  );
}

function post(url, data) {
  // рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рдХреЛрдИ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрддрд╛ рд╣реИ...
  console.log('POST /' + url);
  console.log(data);
}
```

```js src/ShippingForm.js
import { memo, useState } from 'react';

const ShippingForm = memo(function ShippingForm({ onSubmit }) {
  const [count, setCount] = useState(1);

  console.log('<ShippingForm /> рд░реЗрдВрдбрд░ рд╣реЛ рд░рд╣рд╛ рд╣реИ');

  function handleSubmit(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const orderDetails = {
      ...Object.fromEntries(formData),
      count
    };
    onSubmit(orderDetails);
  }

  return (
    <form onSubmit={handleSubmit}>
      <label>
        рдЖрдЗрдЯрдореНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛:
        <button type="button" onClick={() => setCount(count - 1)}>тАУ</button>
        {count}
        <button type="button" onClick={() => setCount(count + 1)}>+</button>
      </label>
      <label>
        рд╕рдбрд╝рдХ:
        <input name="street" />
      </label>
      <label>
        рд╢рд╣рд░:
        <input name="city" />
      </label>
      <label>
        рдкрд┐рди рдХреЛрдб:
        <input name="zipCode" />
      </label>
      <button type="submit">рд╕рдмрдорд┐рдЯ</button>
    </form>
  );
});

export default ShippingForm;
```

```css
label {
  display: block; margin-top: 10px;
}

input {
  margin-left: 5px;
}

button[type="button"] {
  margin: 5px;
}

.dark {
  background-color: black;
  color: white;
}

.light {
  background-color: white;
  color: black;
}
```

</Sandpack>
рдЕрдХреНрд╕рд░ рдмрд┐рдирд╛ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рд╡рд╛рд▓рд╛ рдХреЛрдб рднреА рдареАрдХ рдЪрд▓рддрд╛ рд╣реИред рдпрджрд┐ рдЖрдкрдХреЗ рдЗрдВрдЯрд░реИрдХреНрд╢рдиреНрд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рддреЗрдЬрд╝ рд╣реИрдВ, рддреЛ рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реЛрддреАред

рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдЖрдкрдХреЛ React рдХреЛ рдкреНрд░реЛрдбрдХреНрд╢рди рдореЛрдб рдореЗрдВ рдЪрд▓рд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, [React Developer Tools](/learn/react-developer-tools) рдХреЛ рдбрд┐рд╕рдПрдмрд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЙрди рдбрд┐рд╡рд╛рдЗрд╕реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдЖрдкрдХреЗ рдРрдк рдХреЗ рдпреВрдЬрд╝рд░ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рд╕реЗ рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕рдордЭ рдЖрдПрдЧрд╛ рдХрд┐ рдЖрдкрдХрд╛ рдРрдк рдХреНрдпрд╛ рдзреАрдорд╛ рдХрд░ рд░рд╣рд╛ рд╣реИред


<Solution />

</Recipes>

---

### рдореЗрдореЛрдЗрдЬрд╝реНрдб рдХреЙрд▓рдмреИрдХ рд╕реЗ рд╕реНрдЯреЗрдЯ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ {/*updating-state-from-a-memoized-callback*/}

рдХрднреА-рдХрднреА рдЖрдкрдХреЛ рдореЗрдореЛрдЗрдЬрд╝реНрдб рдХреЙрд▓рдмреИрдХ рдХреЗ рдЕрдВрджрд░ рдкрд┐рдЫрд▓реЗ рд╕реНрдЯреЗрдЯ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕реНрдЯреЗрдЯ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИред

рдпрд╣ `handleAddTodo` рдлрдВрдХреНрд╢рди `todos` рдХреЛ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЗрд╕рд╕реЗ рдЕрдЧрд▓реА todos рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИ:

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos([...todos, newTodo]);
  }, [todos]);
  // ...
```

рдЖрдк рдЪрд╛рд╣реЗрдВрдЧреЗ рдХрд┐ рдореЗрдореЛрдЗрдЬрд╝реНрдб рдлрдВрдХреНрд╢рдиреНрд╕ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рд╣реЛрдВред рдпрджрд┐ рдЖрдк рд╕реНрдЯреЗрдЯ рдХреЛ рдХреЗрд╡рд▓ рдЕрдЧрд▓реА рд╕реНрдЯреЗрдЯ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдкрдврд╝ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП [рдЕрдкрдбреЗрдЯрд░ рдлрдВрдХреНрд╢рди](/reference/react/useState#updating-state-based-on-the-previous-state) рдкрд╛рд╕ рдХрд░реЗрдВ:

```js {6,7}
function TodoList() {
  const [todos, setTodos] = useState([]);

  const handleAddTodo = useCallback((text) => {
    const newTodo = { id: nextId++, text };
    setTodos(todos => [...todos, newTodo]);
  }, []); // тЬЕ todos рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ
  // ...
```

рдпрд╣рд╛рдБ, `todos` рдХреЛ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдмрдирд╛рдиреЗ рдФрд░ рдкрдврд╝рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдк React рдХреЛ рдирд┐рд░реНрджреЗрд╢ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╕реНрдЯреЗрдЯ рдХреЛ *рдХреИрд╕реЗ* рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рд╣реИ (`todos => [...todos, newTodo]`)ред [рдЕрдкрдбреЗрдЯрд░ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдкрдврд╝реЗрдВред](/reference/react/useState#updating-state-based-on-the-previous-state)

---

### рдЗрдлрд╝реЗрдХреНрдЯ рдХреЛ рдмрд╛рд░-рдмрд╛рд░ рдЪрд▓рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛ {/*preventing-an-effect-from-firing-too-often*/}

рдХрднреА-рдХрднреА рдЖрдкрдХреЛ [рдЗрдлрд╝реЗрдХреНрдЯ](/learn/synchronizing-with-effects) рдХреЗ рдЕрдВрджрд░ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдкрдбрд╝ рд╕рдХрддреА рд╣реИ:

```js {4-9,12}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  function createOptions() {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    // ...
```

рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИред [рд╣рд░ рд░рд┐рдПрдХреНрдЯрд┐рд╡ рд╡реИрд▓реНрдпреВ рдХреЛ рдЗрдлрд╝реЗрдХреНрдЯ рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдХреНрд▓реЗрдпрд░ рдХрд░рдирд╛ рдЬрд╝рд░реВрд░реА рд╣реИред](/learn/lifecycle-of-reactive-effects#react-verifies-that-you-specified-every-reactive-value-as-a-dependency) рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк `createOptions` рдХреЛ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдХреНрд▓реЗрдпрд░ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЗрдлрд╝реЗрдХреНрдЯ рдХреЛ рдмрд╛рд░-рдмрд╛рд░ рдЪреИрдЯ рд░реВрдо рд╕реЗ рд░реА-рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░рдг рдмрдиреЗрдЧрд╛:

```js {6}
  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // ЁЯФ┤ рд╕рдорд╕реНрдпрд╛: рдпрд╣ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рд╣рд░ рд░реЗрдВрдбрд░ рдкрд░ рдмрджрд▓рддреА рд╣реИ
  // ...
```

рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрд┐рд╕ рдлрдВрдХреНрд╢рди рдХреЛ рдЗрдлрд╝реЗрдХреНрдЯ рд╕реЗ рдХреЙрд▓ рдХрд░рдирд╛ рд╣реИ, рдЙрд╕реЗ `useCallback` рдореЗрдВ рд░реИрдк рдХрд░реЗрдВ:

```js {4-9,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const createOptions = useCallback(() => {
    return {
      serverUrl: 'https://localhost:1234',
      roomId: roomId
    };
  }, [roomId]); // тЬЕ рдХреЗрд╡рд▓ рдЬрдм roomId рдмрджрд▓рддрд╛ рд╣реИ

  useEffect(() => {
    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [createOptions]); // тЬЕ рдХреЗрд╡рд▓ рдЬрдм createOptions рдмрджрд▓рддрд╛ рд╣реИ
  // ...
```

рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпрджрд┐ `roomId` рд╕рдорд╛рди рд╣реИ, рддреЛ рд░реЗрдВрдбрд░ рдХреЗ рдмреАрдЪ `createOptions` рдлрдВрдХреНрд╢рди рд╡рд╣реА рд░рд╣рддрд╛ рд╣реИред **рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕рд╕реЗ рдмреЗрд╣рддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдлрдВрдХреНрд╢рди рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреА рдЬрд╝рд░реВрд░рдд рд╣реА рдЦрддреНрдо рдХрд░ рджреА рдЬрд╛рдПред** рдЗрд╕рдХреЗ рд▓рд┐рдП рдлрдВрдХреНрд╢рди рдХреЛ рдЗрдлрд╝реЗрдХреНрдЯ рдХреЗ *рдЕрдВрджрд░* рд▓реЗ рдЬрд╛рдПрдБ:

```js {5-10,16}
function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    function createOptions() { // тЬЕ useCallback рдпрд╛ рдлрдВрдХреНрд╢рди рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ!
      return {
        serverUrl: 'https://localhost:1234',
        roomId: roomId
      };
    }

    const options = createOptions();
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // тЬЕ рдХреЗрд╡рд▓ рдЬрдм roomId рдмрджрд▓рддрд╛ рд╣реИ
  // ...
```

рдЕрдм рдЖрдкрдХрд╛ рдХреЛрдб рд╕рд░рд▓ рд╣реЛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ `useCallback` рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред [рдЗрдлрд╝реЗрдХреНрдЯ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рд╣рдЯрд╛рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдЬрд╛рдиреЗрдВред](/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect)

---

### рдХрд╕реНрдЯрдо рд╣реБрдХ рдХреЛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдирд╛ {/*optimizing-a-custom-hook*/}

рдпрджрд┐ рдЖрдк [рдХрд╕реНрдЯрдо рд╣реБрдХ](/learn/reusing-logic-with-custom-hooks) рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЙрд╕рдореЗрдВ рд░рд┐рдЯрд░реНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ `useCallback` рдореЗрдВ рд░реИрдк рдХрд░реЗрдВ:

```js {4-6,8-10}
function useRouter() {
  const { dispatch } = useContext(RouterStateContext);

  const navigate = useCallback((url) => {
    dispatch({ type: 'navigate', url });
  }, [dispatch]);

  const goBack = useCallback(() => {
    dispatch({ type: 'back' });
  }, [dispatch]);

  return {
    navigate,
    goBack,
  };
}
```

рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рд╣реБрдХ рдХреЗ рдпреВрдЬрд╝рд░реНрд╕ рдЬрд╝рд░реВрд░рдд рдкрдбрд╝рдиреЗ рдкрд░ рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░ рд╕рдХреЗрдВред

---

## рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг {/*troubleshooting*/}

### рд╣рд░ рдмрд╛рд░ рдореЗрд░реЗ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рд░реЗрдВрдбрд░ рд╣реЛрдиреЗ рдкрд░ `useCallback` рдирдпрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ {/*every-time-my-component-renders-usecallback-returns-a-different-function*/}

рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдиреЗ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдРрд░реЗ рдХреЛ рджреВрд╕рд░реЗ рдЖрд░реНрдЧреНрдпреВрдореЗрдВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рд╣реИ!

рдпрджрд┐ рдЖрдк рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдРрд░реЗ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ `useCallback` рд╣рд░ рдмрд╛рд░ рдирдпрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░реЗрдЧрд╛:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }); // ЁЯФ┤ рд╣рд░ рдмрд╛рд░ рдирдпрд╛ рдлрдВрдХреНрд╢рди рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛ рд╣реИ: рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдРрд░реЗ рдирд╣реАрдВ рджрд┐рдпрд╛
  // ...
```

рдпрд╣ рд╕рд╣реА рд╡рд░реНрдЬрд╝рди рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдРрд░реЗ рджреВрд╕рд░рд╛ рдЖрд░реНрдЧреНрдпреВрдореЗрдВрдЯ рд╣реИ:

```js {7}
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // тЬЕ рдмрд┐рдирд╛ рд╡рдЬрд╣ рдирдпрд╛ рдлрдВрдХреНрд╢рди рдирд╣реАрдВ рд░рд┐рдЯрд░реНрди рдХрд░рддрд╛
  // ...
```

рдпрджрд┐ рдЗрд╕рд╕реЗ рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рдирд╣реАрдВ рд╣реЛрддреА, рддреЛ рд╢рд╛рдпрдж рдХреЛрдИ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдкрд┐рдЫрд▓реЗ рд░реЗрдВрдбрд░ рд╕реЗ рдЕрд▓рдЧ рд╣реИред рдЖрдк рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдореИрдиреНрдпреБрдЕрд▓реА рд▓реЙрдЧ рдХрд░рдХреЗ рдбрд┐рдмрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

```js {5}
  const handleSubmit = useCallback((orderDetails) => {
    // ..
  }, [productId, referrer]);

  console.log([productId, referrer]);
```

рдЗрд╕рдХреЗ рдмрд╛рдж, рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░реЗрдВрдбрд░реНрд╕ рдХреА рдРрд░реЗ рдкрд░ рд░рд╛рдЗрдЯ-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рджреЛрдиреЛрдВ рдХреЛ "Store as a global variable" рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡ рдХрд░реЗрдВред рдорд╛рди рд▓реЗрдВ рдкрд╣рд▓реА рдРрд░реЗ `temp1` рдФрд░ рджреВрд╕рд░реА `temp2` рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрд╡ рд╣реБрдИ, рддреЛ рдЖрдк рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЪреЗрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рджреЛрдиреЛрдВ рдРрд░реЗ рдХреА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рд╕рдорд╛рди рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ:

```js
Object.is(temp1[0], temp2[0]); // рдХреНрдпрд╛ рдкрд╣рд▓реА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рд╕рдорд╛рди рд╣реИ?
Object.is(temp1[1], temp2[1]); // рдХреНрдпрд╛ рджреВрд╕рд░реА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рд╕рдорд╛рди рд╣реИ?
Object.is(temp1[2], temp2[2]); // ...рдФрд░ рдЗрд╕реА рддрд░рд╣ рд╣рд░ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЗ рд▓рд┐рдП...
```

рдЬрдм рдЖрдкрдХреЛ рдкрддрд╛ рдЪрд▓ рдЬрд╛рдП рдХрд┐ рдХреМрди-рд╕реА рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдореЗрдореЛрдЗрдЬрд╝реЗрд╢рди рддреЛрдбрд╝ рд░рд╣реА рд╣реИ, рддреЛ рдЙрд╕реЗ рд╣рдЯрд╛рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдвреВрдВрдвреЗрдВ рдпрд╛ [рдЙрд╕реЗ рднреА рдореЗрдореЛрдЗрдЬрд╝ рдХрд░реЗрдВ](/reference/react/useMemo#memoizing-a-dependency-of-another-hook)ред

---

### рдореБрдЭреЗ рд▓рд┐рд╕реНрдЯ рдореЗрдВ рд╣рд░ рдЖрдЗрдЯрдо рдХреЗ рд▓рд┐рдП `useCallback` рдХреЙрд▓ рдХрд░рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ {/*i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed*/}

рдорд╛рди рд▓реЗрдВ `Chart` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ [`memo`](/reference/react/memo) рдореЗрдВ рд░реИрдк рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ `ReportList` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЗ рд░реА-рд░реЗрдВрдбрд░ рд╣реЛрдиреЗ рдкрд░ рд▓рд┐рд╕реНрдЯ рдореЗрдВ рд╣рд░ `Chart` рдХрд╛ рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рд╣реЛ рдЬрд╛рдПред рд▓реЗрдХрд┐рди рдЖрдк рд▓реВрдк рдХреЗ рдЕрдВрджрд░ `useCallback` рдХреЙрд▓ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ:

```js {5-14}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item => {
        // ЁЯФ┤ рд▓реВрдк рдХреЗ рдЕрдВрджрд░ useCallback рдХреЙрд▓ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ:
        const handleClick = useCallback(() => {
          sendReport(item)
        }, [item]);

        return (
          <figure key={item.id}>
            <Chart onClick={handleClick} />
          </figure>
        );
      })}
    </article>
  );
}
```

рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдЗрдЯрдо рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдмрдирд╛рдПрдБ рдФрд░ рдЙрд╕рдореЗрдВ `useCallback` рд░рдЦреЗрдВ:

```js {5,12-21}
function ReportList({ items }) {
  return (
    <article>
      {items.map(item =>
        <Report key={item.id} item={item} />
      )}
    </article>
  );
}

function Report({ item }) {
  // тЬЕ рдЯреЙрдк рд▓реЗрд╡рд▓ рдкрд░ useCallback рдХреЙрд▓ рдХрд░реЗрдВ:
  const handleClick = useCallback(() => {
    sendReport(item)
  }, [item]);

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
}
```

рдпрд╛ рдлрд┐рд░, рдЖрдк `useCallback` рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ `Report` рдХреМрдореНрдкреЛрдиреЕрдиреНрдЯ рдХреЛ [`memo`](/reference/react/memo) рдореЗрдВ рд░реИрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрджрд┐ `item` рдкреНрд░реЙрдк рдирд╣реАрдВ рдмрджрд▓рддрд╛, рддреЛ `Report` рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рд╕реЗ `Chart` рднреА рд░реА-рд░реЗрдВрдбрд░ рд╕реНрдХрд┐рдк рдХрд░ рджреЗрдЧрд╛:

```js {5,6-8,15}
function ReportList({ items }) {
  // ...
}

const Report = memo(function Report({ item }) {
  function handleClick() {
    sendReport(item);
  }

  return (
    <figure>
      <Chart onClick={handleClick} />
    </figure>
  );
});
```
